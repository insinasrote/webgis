// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/lang","../utils"],function(e,k){var c={stringFieldType:"esriFieldTypeString",oidFieldType:"esriFieldTypeOID",dateFieldType:"esriFieldTypeDate",numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],geometryFieldType:"esriFieldTypeGeometry",getFieldInfo:function(a,b){var d=null;b=b.fields;for(var c=0;c<b.length;c++)b[c].name===a&&(d=b[c]);return d},isGeometryType:function(a,b){return(a=c.getFieldInfo(a,b))?a.type===c.geometryFieldType:
!1},isStringType:function(a,b){return(a=c.getFieldInfo(a,b))?a.type===c.stringFieldType:!1},isNumberType:function(a,b,d){var h=e.clone(c.numberFieldTypes);d&&h.push(c.oidFieldType);return(a=c.getFieldInfo(a,b))?-1<h.indexOf(a.type):!1},isSubtypeField:function(a,b){return b&&b.typeIdField===a},isContainSubtypeField:function(a,b){return c.isSubtypeField(a,b)?b.types&&b.types.length:!1},isCodedValueField:function(a,b){return(a=c.getFieldInfo(a,b))&&a.domain&&"codedValue"===a.domain.type},isContainCodedValuesField:function(a,
b){var d=c.getFieldInfo(a,b);return c.isCodedValueField(a,b)?d.domain.codedValues&&0<d.domain.codedValues.length:!1},isDateField:function(a,b){return(a=c.getFieldInfo(a,b))?a.type===c.dateFieldType:!1},getNotGeometryFields:function(a){if(a&&a.length)return a.filter(function(a){return a.type!==c.geometryFieldType})},getFieldAlias:function(a,b,d){a=c.getFieldInfo(a,b);return this.getFieldAliasByFieldInfo(a,d)},getFieldInfosByFieldName:function(a,b){return a.map(function(a){a=c.getFieldInfo(a,b);return e.clone(a)}.bind(this))},
getDominOrSubTypeDisplayValue:function(a,b,c){var d=b[a],g=d;(a=this.getDomain(a,b,c))&&a.codedValues&&a.codedValues.length&&a.codedValues.some(function(a){return a.code===d?(g=a.name,!0):!1});return g},getDomain:function(a,b,c){var d,g=c.typeIdField;b.hasOwnProperty(g)&&(d=b[g]);var f,e;"undefined"!==typeof d&&(b=c.types)&&b.length&&b.some(function(b){return b.id===d?((f=b.domains&&b.domains[a])&&"inherited"===f.type&&(f=this.getDomainByLayerDefinition(a),e=!0),!0):!1},this);e||f||(f=this.getDomainByLayerDefinition(a));
return f},getDomainByLayerDefinition:function(a,b){a=c.getFieldInfo(a,b);var d;a&&a.domain&&(d=a.domain);return d},updateOptions:function(a,b,c,h){b?(b=e.clone(b),a.removeOption(a.getOptions()),a.addOption(b)):b=[];!c&&0<b.length&&(c=b[0].value);c&&(a.set("value",c),h&&(b=a.getOptions(c))&&"undefined"!==typeof b.label&&a.set("title",b.label))}};e.mixin(k,c);return k});